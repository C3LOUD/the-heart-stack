package page

import (
	"github.com/C3LOUD/the-heart-stack/components/layout"
)

script CleanUpInput() {
  htmx.on("#todo-submit-btn","htmx:afterRequest", function() {
    htmx.find("#todo-input").value = ""
  })
}

templ TodoPage () {
	@layout.Base() {
		<section class="mx-auto py-20 max-w-[50dvw]" hx-trigger="load, rsync from:body" hx-get="/todo-list" hx-swap="innerHTML" hx-target="#todo-list" hx-boost="true">
			<h1 class="text-2xl">Heart Todo📝</h1>
			<div class="flex">
				<input type="text" name="todo" id="todo-input"/>
				<button id="todo-submit-btn" hx-post="/todos" hx-include="#todo-input">
					<ion-icon name="add-circle" class="text-2xl"></ion-icon>
				</button>
			</div>
			<ol id="todo-list"></ol>
			@CleanUpInput()
		</section>
	}
}
